---
title : "Mocker une API en 5 minutes, c'est possible !"
date : Oct 30 2024
tags :
    - Outils
description : "Un projet d√©marre et vous n'avez pas de back-end sur lequel vous appuyer ? D√©couvrez vite json server !"
banner : "/src/assets/images/clay-banks-8q6e5hu3Ilc-unsplash.webp"
readingtime : "6 min"
author : "Clay Banks"
authorlink : "https://unsplash.com/fr/@claybanks?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash"
unsplashlink : "https://unsplash.com/fr/photos/un-ordinateur-portable-pose-sur-un-bureau-en-bois-8q6e5hu3Ilc?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash"
isArticle : true
---
import Picture from "@components/Picture.astro";

import jsonserverarborescence from "../../assets/images/json-server-arborescence.png";

Au d√©but d'un projet de d√©veloppement (professionnel ou personnel) on a souvent une id√©e du contenu que l'on souhaite pr√©senter, mais on a rarement le back-end et la base de donn√©e qui vont avec.
Est-on contraint de commencer forc√©ment par le back-end de notre application pour autant ? Non, json-server va nous permettre d'entamer un projet front-end sans back-end.

## Qu'est-ce que json server ?

Il s'agit d'un package npm, entendez un projet pr√©-existant et disponible sur le gestionnaire de paquets npm. Inutile de r√©inventer la roue si quelqu'un d'autre l'a fait avant vous, autant r√©utiliser ce qui a d√©j√† √©t√© fait.

Ce package va mettre √† votre disposition un ensemble de routes d'API en quelques minutes, √† condition que votre structure de donn√©es soit d√©j√† pr√™te.

## Pr√©-requis

3 √©l√©ments sont n√©cessaires :

- NodeJS
- Un √©diteur de code (Visual Studio Code dans mon cas)
- Un terminal

Avant d'utiliser json server, vous allez avoir besoin d'installer **NodeJS** (si ce n'est pas d√©j√† fait üòä). Si ce n'est pas le cas, vous pouvez vous rendre [ici](https://nodejs.org/en/download/current) pour t√©l√©charger l'installateur qui correspond √† votre syst√®me d'exploitation.

Une fois l'installation termin√©e, dans un nouveau terminal, saisissez `node -v` ou `node --version`.
Le terminal devrait afficher la version de NodeJS install√©e sur votre ordinateur (dans mon cas, v20.9.0).

Cette v√©rification faite, vous pouvez passer √† la cr√©ation de votre prototype d'API.

## Installer json server

Comme pour tout package npm qui se respecte, l'installation se passe via votre terminal (dans le dossier vis√© pour le projet) avec la commande suivante :

```bash
npm install json-server
```

Si tout s'est bien pass√©, l'arborescence de votre projet devrait ressembler √† cela :

<Picture image={jsonserverarborescence} caption="Arborescence du projet json server." />

Votre projet comporte maintenant 3 √©l√©ments :

- un dossier node_modules, qui contient l'ensemble du code des d√©pendances de json server.
- un fichier package.json qui indique les propri√©t√©s du projet.
- un fichier package-lock.json, qui contient la liste de l'ensemble des d√©pendances et de leurs versions respectives qu'utilise json server.

Ne reste plus qu'√† cr√©er votre fichier db.json. Pas besoin de partir de 0, la [documentation](https://github.com/typicode/json-server#readme) comporte un exemple de fichier db.json.

```json
{
  "posts": [
    { "id": "1", "title": "a title", "views": 100 },
    { "id": "2", "title": "another title", "views": 200 }
  ],
  "comments": [
    { "id": "1", "text": "a comment about post 1", "postId": "1" },
    { "id": "2", "text": "another comment about post 1", "postId": "1" }
  ],
  "profile": {
    "name": "typicode"
  }
}
```

Si vous ne fournissez pas d'id √† vos √©l√©ments, json server le fera pour vous et en g√©n√®rera √† votre place.

## Votre API est pr√™te, testez-la !

Les √©l√©ments qui sont √† la racine de notre fichier JSON constituent les routes que nous allons pouvoir utiliser, dans notre cas /posts, /comments et /profile. Json server √©coute sur le port 3000 par d√©faut, les routes commenceront donc par `http://localhost:3000`.

L'exemple fourni vous permet de disposer des routes suivantes :

- /posts (GET, POST)
- /posts/id (GET, PUT, PATCH, DELETE)
- /comments (GET, POST)
- /comments/id (GET, PUT, PATCH, DELETE)
- /profile (GET, POST, PUT, PATCH)

Plus encore, vous pouvez passer toutes sortes de param√®tres √† votre URL afin d'effectuer diverses op√©rations :

- conditions sur la valeur d'un attribut
- r√©cup√©ration de donn√©es pagin√©es
- tri selon un param√®tre donn√©

Vous pourrez √©galement personnaliser vos routes. Il faudra alors cr√©er un fichier routes.json que vous passerez en option de la commande suivante :

```bash
json-server db.json --routes routes.json
```

Pour tester vos routes, vous pouvez utiliser :

- un appel curl via l'invite de commande sur la route `http://localhost:3000/posts`
- un appel via votre navigateur web
- un appel depuis votre front-end
- une application comme Postman, ou encore Bruno

Le port par d√©faut est le port 3000.

La CLI (Command Line Interface, Interface de Ligne de Commande dans la langue de Moli√®re) de json server dispose d'une grande vari√©t√© d'options afin de modifier la configuration, le port utilis√©, le dossier o√π se trouvent vos fichiers statiques etc. Vous trouverez la liste exhaustive de ces options [ici](https://github.com/typicode/json-server/tree/v0?tab=readme-ov-file#cli-usage).

En r√©sum√©, que vous souhaitiez simuler des appels √† une API via une autre API ou que vous souhaitiez fournir des donn√©es √† un front-end sans √™tre bloqu√© par le d√©veloppement de votre back-end, json server sera votre meilleur alli√©.

## Conclusion

Json server est un outil simple d'utilisation, avec une mise en place rapide qui vous permettra de r√©aliser des tests d'un front-end vers un back-end, ou encore d'une API vers une autre API sans √™tre bloqu√© par l'un de ces √©l√©ments.
Bien entendu, ce n'est pas adapt√© √† la r√©alisation d'une API de production, cela reste un outil destin√© au d√©but du d√©veloppement d'une application.